{% extends "base.html" %}
{% block title %}Backups{% endblock %}
{% block content %}

<script>
    // Initialize filter for Backups table
    const backupFilter = new TableFilter({
        filterId: 'backup',
        tableBodyId: 'backupsTableBody',
        countSpanId: 'visibleBackupCount',
        totalCount: {{ total_backups }},
    filters: {
        provedor: true,
            ip: true,
        }
    });

</script>
<div class="card">
    <h2>Hist√≥rico de Backups</h2>
    {% if backups %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Dispositivo</th>
                <th>IP</th>
                <th>Data/Hora</th>
                <th>Tamanho</th>
                <th>Status</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            {% for backup in backups %}
            <tr>
                <td>{{ backup.id }}</td>
                <td>{{ backup.device_name }}</td>
                <td>{{ backup.ip_address }}</td>
                <td>{{ backup.backup_date }}</td>
                <td>{{ (backup.file_size / 1024)|round(2) }} KB</td>
                <td>{% if backup.status == 'success' %}<span class="badge badge-success">‚úì Sucesso</span>{% else %}<span
                        class="badge badge-danger">‚úó Falha</span>{% endif %}</td>
                <td>
                    {% if backup.status == 'success' %}
                    <a href="/backups/{{ backup.id }}/download" class="btn btn-primary"
                        style="padding:0.4rem 0.8rem;font-size:0.8rem;">‚¨áÔ∏è Download</a>
                    <a href="/backups/{{ backup.id }}/view" class="btn btn-primary"
                        style="padding:0.4rem 0.8rem;font-size:0.8rem;">üëÅÔ∏è Ver</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Nenhum backup encontrado.</p>
    {% endif %}
</div>
{% endblock %}